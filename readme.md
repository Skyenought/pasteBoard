# PasteBoard - 智能 macOS 剪贴板管理工具

## 🚀 项目简介

PasteBoard 是一款专为 macOS 设计的智能剪贴板历史管理工具。它能够自动记录您复制的文本、图片和文件路径，并提供强大的搜索、筛选、编辑和预览功能，帮助您高效管理和利用剪贴板内容。无论是开发者、设计师还是普通用户，PasteBoard 都能让您的日常操作更加便捷。

## ✨ 主要特性

* **全面的剪贴板历史记录**: 自动保存复制的文本、图片和文件路径。
* **智能内容预览与渲染**:
  * 支持纯文本、代码高亮（多种主题）和 Markdown 渲染。
  * 应用能够根据内容自动识别类型（代码、Markdown、纯文本），并选择最佳显示模式。
  * 提供独立的详细预览窗口，支持全屏查看和手动切换显示模式。
* **高效搜索与筛选**:
  * 支持通过自定义标题、内容或标签进行全文搜索。
  * 提供“全部”和“收藏”两种模式快速切换历史记录视图。
  * **新增**: 支持按日期范围精确筛选历史记录，方便查找特定时间的剪贴板内容。
  * **新增**: 通过标签过滤，快速定位特定类别的剪贴板内容，支持多选标签。
* **个性化管理**:
  * 为重要的剪贴板内容添加自定义标题，使其更易于识别。
  * 将常用条目标记为“收藏”，方便快速查找和保护不被批量删除。
  * 为条目添加和管理标签，实现更精细的分类和组织。
* **便捷操作**:
  * 全局快捷键 `⌘ + ⌥ + V` 快速唤起应用主窗口，提升工作效率。
  * 一键复制历史记录中的任何条目到当前剪贴板。
  * 支持删除单条记录，或批量删除所有非收藏记录（支持按住 Option 键快速删除）。
  * 集成的标签管理界面允许添加、重命名和删除标签；删除标签时会智能检查其是否被其他记录使用，并提供用户友好的提示。
* **用户界面**:
  * 简洁直观的 SwiftUI 界面，提供流畅的用户体验。
  * 支持跟随系统、浅色或深色模式切换，适应用户偏好。

## 📸 截图 (待补充)
<!-- 在这里插入应用的截图，例如： -->
<!-- ![主界面](screenshots/main_window.png) -->
<!-- ![预览界面](screenshots/preview_window.png) -->
<!-- ![标签管理](screenshots/tag_management.png) -->

## 🛠️ 技术栈

* **SwiftUI**: 构建现代化和响应式用户界面。
* **AppKit**: 实现 macOS 特有的系统级功能，如剪贴板监听、全局热键、NSImage 处理等。
* **GRDB.swift**: 强大且类型安全的 SQLite 数据库封装库，用于高效的数据持久化和查询。
* **MarkdownUI**: 用于在 SwiftUI 视图中渲染 Markdown 格式的文本。
* **Highlightr**: 实现代码语法高亮显示。
* **Quartz (QuickLook)**: 用于未来可能扩展的文件路径内容预览。
* **Carbon.HIToolbox**: 用于注册和管理全局系统热键。

## ⚙️ 安装与运行

1. **克隆仓库**:
    首先，使用 Git 将项目仓库克隆到您的本地机器：

    ```bash
    git clone https://github.com/your-username/pasteboard.git
    cd pasteboard
    ```

2. **打开项目**:
    在 Xcode 中打开 `pasteboard.xcodeproj` 文件。
3. **安装依赖**:
    本项目使用 Swift Package Manager (SPM) 管理所有外部依赖（如 GRDB.swift, MarkdownUI, Highlightr）。Xcode 会自动解析并下载所需的包。如果遇到网络问题或解析失败，您可以尝试在 Xcode 菜单中选择 `File > Packages > Resolve Package Versions`。
4. **构建并运行**:
    选择您的 macOS 设备（通常是“My Mac”）作为运行目标，然后点击 Xcode 中的运行按钮（▶️）。

    **重要提示**:
    * **辅助功能权限**: 为了使全局快捷键 `⌘ + ⌥ + V` 生效，应用需要获得“辅助功能”权限。应用首次启动时会尝试引导您前往“系统设置”>“隐私与安全性”>“辅助功能”中授予权限。请务必开启，否则快捷键将无法工作。
    * **数据库位置**: 剪贴板历史数据将持久化存储在您的用户目录下的特定位置：`~/Documents/pasteBoard/history.sqlite`。

## 🚀 使用指南

1. **启动应用**: 应用启动后，将会在后台自动监听您的剪贴板，并将复制的内容保存到历史记录中。
2. **唤起主窗口**:
    * 您可以通过点击 Dock 栏中的应用图标来打开主窗口。
    * 或者，随时按下全局快捷键 `⌘ + ⌥ + V` 即可快速唤起应用。
3. **浏览历史**: 主界面会以列表形式显示您复制的所有历史记录。
4. **搜索与筛选**:
    * **搜索框**: 使用顶部的搜索框，您可以根据条目的自定义标题、原始内容或关联标签进行模糊搜索。
    * **收藏/全部筛选**: 在底部工具栏中，通过选择 `全部` 或 `收藏` 来切换显示所有历史记录或仅显示您收藏的条目。
    * **日期筛选**: 点击底部工具栏的 `日历` 图标，弹出日期选择器。您可以选择一个日期范围来过滤显示特定时间段内的剪贴板历史。
    * **标签过滤**: 在搜索框下方，会显示所有已创建的标签（如果存在）。点击任何标签药丸即可快速过滤出包含该标签的条目。再次点击已选中的标签可以取消过滤。
5. **操作剪贴板条目**:
    * **复制到剪贴板**: 点击列表项右侧的 `doc.on.doc` 图标（复制图标）即可将该条目内容重新复制到系统剪贴板。
    * **收藏/取消收藏**: 点击 `星形` 图标来收藏或取消收藏该条目。收藏的条目不会被“清空非收藏”操作删除。
    * **删除条目**: 点击 `trash` 图标（垃圾桶图标）可删除该条目。为了防止误删，默认会弹出确认提示。如果您按住 `⌥ (Option)` 键再点击，则会跳过确认直接删除。
    * **预览详细内容**: 点击列表中的任何条目，会在一个独立的新窗口中打开该条目的详细预览。
    * **编辑条目**: 在主列表或预览窗口中，点击 `编辑条目...` 按钮，可以进入编辑模式。
        * 在编辑模式下，您可以为条目设置**自定义标题**，选择其**显示模式**（自动、纯文本、代码、Markdown），并**添加或移除标签**。
6. **管理标签**:
    * 在主界面的搜索框下方，点击 `齿轮` 图标即可进入标签管理界面。
    * 在这里，您可以添加新的标签、重命名现有标签，或删除不再需要的标签。删除标签时，系统会提示该标签是否正被其他记录使用，确保您不会意外删除重要标签。
7. **清空所有非收藏历史**:
    在主列表底部，如果当前的筛选模式是 `全部` 且没有激活搜索或标签过滤，您会看到一个 `清空` 按钮。点击它可以删除所有未被标记为收藏的历史记录（会弹出确认提示）。

## 🤝 贡献

欢迎各种形式的贡献！如果您有任何想法、错误报告、功能建议或代码改进，请随时通过 GitHub Issues 或 Pull Requests 提交。

## 📄 许可证

本项目采用 MIT 许可证。详见项目根目录下的 `LICENSE` 文件。
